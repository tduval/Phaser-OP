<!doctype html>
<html lang="en">
    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <link rel="stylesheet" href="assets/libs/css/bootstrap.css">
        <link rel="stylesheet" href="assets/libs/css/style.css">

        <title>My Phaser-OP</title>

    </head>
    <body>

        <div class="container" id="Game-Container">
            <h1 class="text-center">Title H1</h1>
            <div class="row">
                <div-bounty></div-bounty>
                <div class="col">col</div>
            </div>
            <div class="row">
                <div class="col-sm-3 text-center" id="divControl">
                    <h4>Control Section</h4>
                    <div id="divButton"></div>
                </div>
                <div class="col-sm-9 text-center" id="divPhaser">
                    <button type="button" class="btn btn-outline-dark btn-sm" onclick="debugSwitch()">Debug</button>
                    <canvas-phaser></canvas-phaser>
                </div>
            </div>
        </div>

        <script src="assets/libs/js/phaser.js"></script>

        <!-- VueJS 2.5.16 JavaScript -->
        <script src="assets/libs/js/vue.js"></script>
        <!-- Vuex 3.0.1 JavaScript -->
        <script src="assets/libs/js/vuex.js"></script>

        <script src="assets/store.js"></script>

        <script src="assets/boot.js"></script>
        <script src="assets/preload.js"></script>
        <script src="assets/level01.js"></script>

        <script type="text/javascript">

            Vue.component('div-bounty', {
                computed: {
                    bounty: function () {
                        return this.$store.state.bounty
                    },
                    rank: function () {
                        let rank_obj = this.$store.state.rankList.filter(r => r.bounty <= this.bounty);
                        return rank_obj[rank_obj.length-1]
                    }
                },
                template:   `<div class="col" id="divBounty">
                                <span class="h1 text-left pt-4"> Bounty {{ bounty }} $ </span>
                                <span class="text-left red-text">({{ rank.name }})</span>
                            </div>`,
            });

            Vue.component('canvas-phaser', {
                template:   `<div id="divCanvasWrapper"></div>`,
            });

            var vm = new Vue({
                el: '#Game-Container',
                store,
                computed: {
                    enemies: function () {
                        return this.$store.state.myEnemies
                    },
                    mainPlayer: function () {
                        return this.$store.state.myPlayer
                    },
                },
                mounted () {
                    //this.moneyProducer()
                },
                methods: {
                    // laborClick: function () {
                    //     store.commit('doLabor')
                    // },
                    // moneyProducer: function () {
                    //     setInterval(() => {
                    //         store.commit('countMoneyPerSecond')
                    //         store.commit('incrementMoney')
                    //     }, 1000)
                    // },
                },
            });
        </script>
        <script src="assets/main.js"></script>

        <script type="text/javascript">
            var domBtn = document.getElementById("divButton");
            for (var i = 0; i < animPlayerList.length; i++) {
                var elementBtn = document.createElement("button");
                elementBtn.type = "button";
                elementBtn.value = animPlayerList[i];
                elementBtn.innerHTML = animPlayerList[i];
                elementBtn.className="btn btn-info btn-block";
                elementBtn.onclick = function() { changeAnim(this.value); };
                domBtn.appendChild(elementBtn);
            }

            function changeAnim (a) {
                this.player.play(a);
            }

            function debugSwitch() {
                debugMode = !debugMode;
                console.log("debug : ", debugMode);
            }
        </script>
    </body>
</html>
